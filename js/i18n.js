// =====================================
// i18n.js - Internationalization module
// =====================================
export const i18n = {
    lang: 'en', // default language
  
    // Translation dictionary
    strings: {
      en: {
        welcome: "Welcome",
        buy: "Buy",
        sell: "Sell",
        login: "Login",
        logout: "Logout",
        balance: "Balance",
        popularProducts: "Popular Products",
        topTrending: "Top trending items on the marketplace",
        featuredMarketplace: "Featured Marketplace",
        startShopping: "Start Shopping",
        learnMore: "Learn More",
        products: "Products",
        sellers: "Sellers",
        users: "Users",
        reserve: "Reserve",
        insufficientBalance: "Insufficient balance",
        loginFirst: "Please login first",
        purchaseComplete: "Purchase completed",
        addBalance: "Add Balance",
        settings: "Settings",
        username: "Username",
        save: "Save",
        saved: "Saved successfully",
        reserved: "Reserved",
        stock: "Stock",
        description: "Description",
        category: "Category",
        condition: "Condition",
        location: "Location",
        quickView: "Quick View",
        buyNow: "Buy Now",
        addToCart: "Add to Cart",
        page_title: "Marketplace - Home",
        hero_title: "Discover Unique Items",
        hero_subtitle: "Buy and sell with confidence. Explore thousands of products.",
        btn_start: "Start Shopping",
        btn_learn: "Learn More",
        viewItems: "View Items",
        sellItems: "Sell Items",
        all: "All",
        electronics: "Electronics",
        clothing: "Clothing",
        furniture: "Furniture",
        other: "Other",
        loading: "Loading products...",
        no_products: "No products found",
        why_choose: "Why Choose Us?",
        marketplace_experience: "Our marketplace offers the best experience for buyers and sellers.",
        secure_msg: "Secure Messaging",
        msg_desc: "Chat with sellers directly with privacy guaranteed.",
        balance: "Balance Management",
        balance_desc: "Add funds and manage your balance easily for instant purchases.",
        fast_tx: "Fast Transactions",
        tx_desc: "Reserve or buy products quickly without unnecessary delays.",
        balance_title: "Your Balance",
        balance_subtitle: "Manage your funds and view transaction history.",
        current_balance: "Current Balance",
        add_funds: "Add Funds",
        btn_add: "Add",
        transactions: "Transaction History",
        no_tx: "No transactions yet.",
        user_settings: "User Settings",
        manage_profile: "Manage your profile, preferences, and account.",
        email: "Email",
        language: "Language",
        theme: "Theme",
        toggle_theme: "Toggle Dark/Light Mode",
        product_name: "Product Name",
        select_category: "Select category",
        price: "Price (â‚¬)",
        enter_price: "Enter price",
        product_description: "Description",
        enter_description: "Enter product description",
        image_url: "Product Image URL",
        enter_stock: "Enter stock quantity",
        list_product: "List Product",
        welcome_back: "Welcome Back",
        login_account: "Log in to your marketplace account",
        email_address: "Email Address",
        password: "Password",
        no_account: "Don't have an account?",
        sign_up: "Sign up",
        contacts: "Contacts",
        select_chat: "Select a chat",
        type_message: "Type a message...",
        send: "Send",
        dashboard: "Dashboard",
        overview: "Overview of marketplace activities",
        registered_users: "Registered Users",
        total_products: "Total Products",
        transactions_today: "Transactions Today",
        recent_activities: "Recent Activities",
        user: "User",
        action: "Action",
        date: "Date",
        amount: "Amount",
        added_funds: "Added Funds",
        sold_product: "Sold Product",
        purchased_product: "Purchased Product",
        register_title: "Register - Marketplace",
        create_account: "Create Account",
        join_marketplace: "Join our marketplace and start buying and selling",
        confirm_password: "Confirm Password",
        register: "Register",
        already_have_account: "Already have an account?",
        sign_in: "Sign in",
        passwords_not_match: "Passwords do not match",
        password_too_short: "Password must be at least 6 characters",
        registration_success: "Registration successful! Please check your email to verify your account.",
        chat: "Chat",
        admin: "Admin",
        sell_subtitle: "List your products easily and reach thousands of buyers.",
        settings_title: "Marketplace - Settings",
        account_actions: "Account Actions",
        delete_account: "Delete Account",
        // Filter translations
        filter_search: "ðŸ” Search",
        search_placeholder: "Search products...",
        filter_category: "ðŸ“¦ Category",
        filter_all_categories: "All Categories",
        filter_price_range: "ðŸ’° Price Range",
        min_price: "Min â‚¬",
        max_price: "Max â‚¬",
        filter_condition: "â­ Condition",
        filter_all_conditions: "All Conditions",
        condition_new: "âœ¨ New",
        condition_like_new: "ðŸ”„ Like New",
        condition_good: "ðŸ‘ Good",
        condition_fair: "ðŸ˜ Fair",
        condition_poor: "âš ï¸ Poor",
        filter_location: "ðŸ“ Location",
        filter_all_locations: "All Locations",
        location_riga: "Riga",
        location_daugavpils: "Daugavpils",
        location_liepaja: "Liepaja",
        location_jelgava: "Jelgava",
        location_jurmala: "Jurmala",
        location_ventspils: "Ventspils",
        location_rezekne: "Rezekne",
        location_valmiera: "Valmiera",
        location_other: "Other",
        filter_availability: "ðŸ“¦ Availability",
        filter_all: "All",
        filter_in_stock: "In Stock",
        filter_reserved: "Reserved",
        filter_sort: "ðŸ“… Sort By",
        sort_newest: "Newest First",
        sort_oldest: "Oldest First",
        sort_price_low: "Price: Low to High",
        sort_price_high: "Price: High to Low",
        sort_name: "Name A-Z",
        btn_apply_filters: "ðŸ” Apply",
        btn_clear_filters: "ðŸ—‘ï¸ Clear",
        // Sell page translations
        sell_product_name: "Product Name *",
        sell_enter_name: "Enter product name",
        sell_category: "Category *",
        sell_select_category: "Select category",
        sell_price: "Price (â‚¬) *",
        sell_enter_price: "0.00",
        sell_condition: "Condition *",
        sell_select_condition: "Select condition",
        sell_stock: "Stock Quantity *",
        sell_enter_stock: "1",
        sell_location: "Location *",
        sell_select_location: "Select location",
        sell_brand: "Brand (Optional)",
        sell_enter_brand: "Enter brand name",
        sell_color: "Color (Optional)",
        sell_enter_color: "Enter color",
        sell_description: "Description *",
        sell_enter_description: "Describe your product in detail...",
        sell_image_url: "Product Image URL *",
        sell_enter_image_url: "https://example.com/image.jpg",
        listing_fee_description: "Listing fee: â‚¬0.50 - â‚¬1.00 (based on price)",
        books: "Books",
        sports: "Sports",
        home: "Home",
        vehicles: "Vehicles"
      },
      lv: {
        welcome: "Laipni lÅ«dzam",
        buy: "Pirkt",
        sell: "PÄrdot",
        login: "PieslÄ“gties",
        logout: "IzrakstÄ«ties",
        balance: "Bilance",
        popularProducts: "PopulÄrÄkie produkti",
        topTrending: "PopulÄrÄkie produkti tirgÅ«",
        featuredMarketplace: "IzceltÄ tirgus vieta",
        startShopping: "SÄkt iepirkties",
        learnMore: "UzzinÄt vairÄk",
        products: "Produkti",
        sellers: "PÄrdevÄ“ji",
        users: "LietotÄji",
        reserve: "RezervÄ“t",
        insufficientBalance: "Nepietiekams bilances atlikums",
        loginFirst: "LÅ«dzu, vispirms pieslÄ“dzieties",
        purchaseComplete: "Pirkums pabeigts",
        addBalance: "Pievienot bilanci",
        settings: "IestatÄ«jumi",
        username: "LietotÄjvÄrds",
        save: "SaglabÄt",
        saved: "VeiksmÄ«gi saglabÄts",
        reserved: "RezervÄ“ts",
        stock: "KrÄjums",
        description: "Apraksts",
        category: "Kategorija",
        condition: "StÄvoklis",
        location: "AtraÅ¡anÄs vieta",
        quickView: "Ä€trÄ apskate",
        buyNow: "Pirkt tagad",
        addToCart: "Pievienot grozam",
        page_title: "Tirgus - SÄkums",
        hero_title: "AtklÄj unikÄlus priekÅ¡metus",
        hero_subtitle: "PÄ“rc un pÄrdod ar pÄrliecÄ«bu. IzpÄ“ti tÅ«kstoÅ¡iem produktu.",
        btn_start: "SÄkt iepirkties",
        btn_learn: "UzzinÄt vairÄk",
        viewItems: "SkatÄ«t priekÅ¡metus",
        sellItems: "PÄrdot priekÅ¡metus",
        all: "Visi",
        electronics: "Elektronika",
        clothing: "ApÄ£Ä“rbs",
        furniture: "MÄ“beles",
        other: "Citi",
        loading: "IelÄdÄ“ produktus...",
        no_products: "Nav atrasti produkti",
        why_choose: "KÄpÄ“c izvÄ“lÄ“ties mÅ«s?",
        marketplace_experience: "MÅ«su tirgus piedÄvÄ labÄko pieredzi pircÄ“jiem un pÄrdevÄ“jiem.",
        secure_msg: "DroÅ¡a ziÅ†ojumapmaiÅ†a",
        msg_desc: "ÄŒatÄ“jiet ar pÄrdevÄ“jiem tieÅ¡i ar garantÄ“tu privÄtumu.",
        balance: "Bilances pÄrvaldÄ«ba",
        balance_desc: "Pievienojiet lÄ«dzekÄ¼us un pÄrvaldiet bilanci viegli tÅ«lÄ«tÄ“jiem pirkumiem.",
        fast_tx: "Ä€tras transakcijas",
        tx_desc: "RezervÄ“jiet vai pÄ“rciet produktus Ätri bez nevajadzÄ«gÄm aizkavÄ“m.",
        balance_title: "JÅ«su bilance",
        balance_subtitle: "PÄrvaldiet savus lÄ«dzekÄ¼us un skatiet transakciju vÄ“sturi.",
        current_balance: "PaÅ¡reizÄ“jÄ bilance",
        add_funds: "Pievienot lÄ«dzekÄ¼us",
        btn_add: "Pievienot",
        transactions: "Transakciju vÄ“sture",
        no_tx: "VÄ“l nav transakciju.",
        user_settings: "LietotÄja iestatÄ«jumi",
        manage_profile: "PÄrvaldiet savu profilu, preferences un kontu.",
        email: "E-pasts",
        language: "Valoda",
        theme: "TÄ“ma",
        toggle_theme: "PÄrslÄ“gt tumÅ¡o/gaiÅ¡o reÅ¾Ä«mu",
        product_name: "Produkta nosaukums",
        select_category: "IzvÄ“lieties kategoriju",
        price: "Cena (â‚¬)",
        enter_price: "Ievadiet cenu",
        product_description: "Apraksts",
        enter_description: "Ievadiet produkta aprakstu",
        image_url: "Produkta attÄ“la URL",
        enter_stock: "Ievadiet krÄjuma daudzumu",
        list_product: "Pievienot produktu",
        welcome_back: "Laipni lÅ«dzam atpakaÄ¼",
        login_account: "PieslÄ“dzieties savam tirgus kontam",
        email_address: "E-pasta adrese",
        password: "Parole",
        no_account: "Nav konta?",
        sign_up: "ReÄ£istrÄ“ties",
        contacts: "Kontakti",
        select_chat: "IzvÄ“lieties Äatu",
        type_message: "Ierakstiet ziÅ†ojumu...",
        send: "SÅ«tÄ«t",
        dashboard: "Panelis",
        overview: "Tirgus aktivitÄÅ¡u pÄrskats",
        registered_users: "ReÄ£istrÄ“tie lietotÄji",
        total_products: "KopÄ“jie produkti",
        transactions_today: "Transakcijas Å¡odien",
        recent_activities: "Nesenie notikumi",
        user: "LietotÄjs",
        action: "DarbÄ«ba",
        date: "Datums",
        amount: "Summa",
        added_funds: "Pievienoti lÄ«dzekÄ¼i",
        sold_product: "PÄrdots produkts",
        purchased_product: "Nopirkts produkts",
        register_title: "ReÄ£istrÄcija - Tirgus",
        create_account: "Izveidot kontu",
        join_marketplace: "Pievienojieties mÅ«su tirgum un sÄciet pirkt un pÄrdot",
        confirm_password: "ApstiprinÄt paroli",
        register: "ReÄ£istrÄ“ties",
        already_have_account: "Jau ir konts?",
        sign_in: "PieslÄ“gties",
        passwords_not_match: "Paroles nesakrÄ«t",
        password_too_short: "Parolei jÄbÅ«t vismaz 6 rakstzÄ«mÄ“m",
        registration_success: "ReÄ£istrÄcija veiksmÄ«ga! LÅ«dzu, pÄrbaudiet savu e-pastu, lai verificÄ“tu kontu.",
        chat: "ÄŒats",
        admin: "AdministrÄcija",
        sell_subtitle: "Pievienojiet savus produktus viegli un sasniedziet tÅ«kstoÅ¡iem pircÄ“ju.",
        settings_title: "Tirgus - IestatÄ«jumi",
        account_actions: "Konta darbÄ«bas",
        delete_account: "DzÄ“st kontu",
        // Filter translations
        filter_search: "ðŸ” MeklÄ“t",
        search_placeholder: "MeklÄ“t produktus...",
        filter_category: "ðŸ“¦ Kategorija",
        filter_all_categories: "Visas kategorijas",
        filter_price_range: "ðŸ’° Cenu diapazons",
        min_price: "Min â‚¬",
        max_price: "Maks â‚¬",
        filter_condition: "â­ StÄvoklis",
        filter_all_conditions: "Visi stÄvokÄ¼i",
        condition_new: "âœ¨ Jauns",
        condition_like_new: "ðŸ”„ KÄ jauns",
        condition_good: "ðŸ‘ Labs",
        condition_fair: "ðŸ˜ VidÄ“js",
        condition_poor: "âš ï¸ Slikts",
        filter_location: "ðŸ“ AtraÅ¡anÄs vieta",
        filter_all_locations: "Visas vietas",
        location_riga: "RÄ«ga",
        location_daugavpils: "Daugavpils",
        location_liepaja: "LiepÄja",
        location_jelgava: "Jelgava",
        location_jurmala: "JÅ«rmala",
        location_ventspils: "Ventspils",
        location_rezekne: "RÄ“zekne",
        location_valmiera: "Valmiera",
        location_other: "Cits",
        filter_availability: "ðŸ“¦ PieejamÄ«ba",
        filter_all: "Visi",
        filter_in_stock: "Ir noliktavÄ",
        filter_reserved: "RezervÄ“ts",
        filter_sort: "ðŸ“… KÄrtot pÄ“c",
        sort_newest: "JaunÄkie vispirms",
        sort_oldest: "VecÄkie vispirms",
        sort_price_low: "Cena: No zemÄkÄs",
        sort_price_high: "Cena: No augstÄkÄs",
        sort_name: "Nosaukums A-Z",
        btn_apply_filters: "ðŸ” Pielietot",
        btn_clear_filters: "ðŸ—‘ï¸ NotÄ«rÄ«t",
        // Sell page translations
        sell_product_name: "Produkta nosaukums *",
        sell_enter_name: "Ievadiet produkta nosaukumu",
        sell_category: "Kategorija *",
        sell_select_category: "IzvÄ“lieties kategoriju",
        sell_price: "Cena (â‚¬) *",
        sell_enter_price: "0.00",
        sell_condition: "StÄvoklis *",
        sell_select_condition: "IzvÄ“lieties stÄvokli",
        sell_stock: "KrÄjuma daudzums *",
        sell_enter_stock: "1",
        sell_location: "AtraÅ¡anÄs vieta *",
        sell_select_location: "IzvÄ“lieties vietu",
        sell_brand: "ZÄ«mols (NeobligÄti)",
        sell_enter_brand: "Ievadiet zÄ«mola nosaukumu",
        sell_color: "KrÄsa (NeobligÄti)",
        sell_enter_color: "Ievadiet krÄsu",
        sell_description: "Apraksts *",
        sell_enter_description: "Aprakstiet savu produktu detalizÄ“ti...",
        sell_image_url: "Produkta attÄ“la URL *",
        sell_enter_image_url: "https://example.com/image.jpg",
        listing_fee_description: "IevietoÅ¡anas maksa: â‚¬0,50 - â‚¬1,00 (atkarÄ«bÄ no cenas)",
        books: "GrÄmatas",
        sports: "Sports",
        home: "MÄja",
        vehicles: "TransportlÄ«dzekÄ¼i"
      }
    },
  
    // Translate a key
    t(key) {
      return this.strings[this.lang]?.[key] || this.strings['en'][key] || key;
    },
  
    // Set current language and update all elements
    setLang(lang) {
      if (!this.strings[lang]) {
        console.warn(`Language ${lang} not found, defaulting to English`);
        lang = 'en';
      }
      this.lang = lang;
  
      // Translate all elements with data-i18n
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        el.innerText = this.t(key);
      });

      // Translate all placeholders with data-i18n-placeholder
      document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.dataset.i18nPlaceholder;
        el.placeholder = this.t(key);
      });
  
      // Translate dynamic product cards
      document.querySelectorAll('.product-card-modern').forEach(card => {
        const catEl = card.querySelector('.product-category');
        const priceEl = card.querySelector('.price-amount');
        const buyBtn = card.querySelector('.btn-buy-now');
        const reserveBtn = card.querySelector('.product-badge-new');
  
        if (buyBtn) buyBtn.innerText = this.t('buyNow');
        if (reserveBtn && reserveBtn.dataset.status === 'reserved') reserveBtn.innerText = this.t('reserved');
      });
  
      // Translate modal if open
      const modal = document.getElementById('productModal');
      if(modal) {
        modal.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.dataset.i18n;
          el.innerText = this.t(key);
        });
      }
    },
  
    // Format currency
    formatCurrency(amount) {
      return new Intl.NumberFormat(this.lang, { style: 'currency', currency: 'EUR' }).format(amount);
    }
  };
  
  // Auto-apply translations on page load
  window.addEventListener('DOMContentLoaded', () => {
    i18n.setLang(i18n.lang);
  });
  