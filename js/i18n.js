// =====================================
// i18n.js - Internationalization module
// =====================================
export const i18n = {
    lang: 'en', // default language
  
    // Translation dictionary
    strings: {
      en: {
        welcome: "Welcome",
        buy: "Buy",
        sell: "Sell",
        login: "Login",
        logout: "Logout",
        balance: "Balance",
        popularProducts: "Popular Products",
        topTrending: "Top trending items on the marketplace",
        featuredMarketplace: "Featured Marketplace",
        startShopping: "Start Shopping",
        learnMore: "Learn More",
        products: "Products",
        sellers: "Sellers",
        users: "Users",
        reserve: "Reserve",
        insufficientBalance: "Insufficient balance",
        loginFirst: "Please login first",
        purchaseComplete: "Purchase completed",
        addBalance: "Add Balance",
        settings: "Settings",
        username: "Username",
        save: "Save",
        saved: "Saved successfully",
        reserved: "Reserved",
        stock: "Stock",
        description: "Description",
        category: "Category",
        condition: "Condition",
        location: "Location",
        quickView: "Quick View",
        buyNow: "Buy Now",
        addToCart: "Add to Cart",
        page_title: "Marketplace - Home",
        hero_title: "Discover Unique Items",
        hero_subtitle: "Buy and sell with confidence. Explore thousands of products.",
        btn_start: "Start Shopping",
        btn_learn: "Learn More",
        viewItems: "View Items",
        sellItems: "Sell Items",
        all: "All",
        electronics: "Electronics",
        clothing: "Clothing",
        furniture: "Furniture",
        other: "Other",
        loading: "Loading products...",
        no_products: "No products found",
        why_choose: "Why Choose Us?",
        marketplace_experience: "Our marketplace offers the best experience for buyers and sellers.",
        secure_msg: "Secure Messaging",
        msg_desc: "Chat with sellers directly with privacy guaranteed.",
        balance: "Balance Management",
        balance_desc: "Add funds and manage your balance easily for instant purchases.",
        fast_tx: "Fast Transactions",
        tx_desc: "Reserve or buy products quickly without unnecessary delays.",
        balance_title: "Your Balance",
        balance_subtitle: "Manage your funds and view transaction history.",
        current_balance: "Current Balance",
        add_funds: "Add Funds",
        btn_add: "Add",
        transactions: "Transaction History",
        no_tx: "No transactions yet.",
        user_settings: "User Settings",
        manage_profile: "Manage your profile, preferences, and account.",
        email: "Email",
        language: "Language",
        theme: "Theme",
        toggle_theme: "Toggle Dark/Light Mode",
        product_name: "Product Name",
        select_category: "Select category",
        price: "Price (€)",
        enter_price: "Enter price",
        product_description: "Description",
        enter_description: "Enter product description",
        image_url: "Product Image URL",
        enter_stock: "Enter stock quantity",
        list_product: "List Product",
        welcome_back: "Welcome Back",
        login_account: "Log in to your marketplace account",
        email_address: "Email Address",
        password: "Password",
        no_account: "Don't have an account?",
        sign_up: "Sign up",
        contacts: "Contacts",
        select_chat: "Select a chat",
        type_message: "Type a message...",
        send: "Send",
        dashboard: "Dashboard",
        overview: "Overview of marketplace activities",
        registered_users: "Registered Users",
        total_products: "Total Products",
        transactions_today: "Transactions Today",
        recent_activities: "Recent Activities",
        user: "User",
        action: "Action",
        date: "Date",
        amount: "Amount",
        added_funds: "Added Funds",
        sold_product: "Sold Product",
        purchased_product: "Purchased Product",
        register_title: "Register - Marketplace",
        create_account: "Create Account",
        join_marketplace: "Join our marketplace and start buying and selling",
        confirm_password: "Confirm Password",
        register: "Register",
        already_have_account: "Already have an account?",
        sign_in: "Sign in",
        passwords_not_match: "Passwords do not match",
        password_too_short: "Password must be at least 6 characters",
        registration_success: "Registration successful! Please check your email to verify your account.",
        chat: "Chat",
        admin: "Admin",
        sell_subtitle: "List your products easily and reach thousands of buyers.",
        settings_title: "Marketplace - Settings",
        account_actions: "Account Actions",
        delete_account: "Delete Account"
      },
      lv: {
        welcome: "Laipni lūdzam",
        buy: "Pirkt",
        sell: "Pārdot",
        login: "Pieslēgties",
        logout: "Izrakstīties",
        balance: "Bilance",
        popularProducts: "Populārākie produkti",
        topTrending: "Populārākie produkti tirgū",
        featuredMarketplace: "Izceltā tirgus vieta",
        startShopping: "Sākt iepirkties",
        learnMore: "Uzzināt vairāk",
        products: "Produkti",
        sellers: "Pārdevēji",
        users: "Lietotāji",
        reserve: "Rezervēt",
        insufficientBalance: "Nepietiekams bilances atlikums",
        loginFirst: "Lūdzu, vispirms pieslēdzieties",
        purchaseComplete: "Pirkums pabeigts",
        addBalance: "Pievienot bilanci",
        settings: "Iestatījumi",
        username: "Lietotājvārds",
        save: "Saglabāt",
        saved: "Veiksmīgi saglabāts",
        reserved: "Rezervēts",
        stock: "Krājums",
        description: "Apraksts",
        category: "Kategorija",
        condition: "Stāvoklis",
        location: "Atrašanās vieta",
        quickView: "Ātrā apskate",
        buyNow: "Pirkt tagad",
        addToCart: "Pievienot grozam",
        page_title: "Tirgus - Sākums",
        hero_title: "Atklāj unikālus priekšmetus",
        hero_subtitle: "Pērc un pārdod ar pārliecību. Izpēti tūkstošiem produktu.",
        btn_start: "Sākt iepirkties",
        btn_learn: "Uzzināt vairāk",
        viewItems: "Skatīt priekšmetus",
        sellItems: "Pārdot priekšmetus",
        all: "Visi",
        electronics: "Elektronika",
        clothing: "Apģērbs",
        furniture: "Mēbeles",
        other: "Citi",
        loading: "Ielādē produktus...",
        no_products: "Nav atrasti produkti",
        why_choose: "Kāpēc izvēlēties mūs?",
        marketplace_experience: "Mūsu tirgus piedāvā labāko pieredzi pircējiem un pārdevējiem.",
        secure_msg: "Droša ziņojumapmaiņa",
        msg_desc: "Čatējiet ar pārdevējiem tieši ar garantētu privātumu.",
        balance: "Bilances pārvaldība",
        balance_desc: "Pievienojiet līdzekļus un pārvaldiet bilanci viegli tūlītējiem pirkumiem.",
        fast_tx: "Ātras transakcijas",
        tx_desc: "Rezervējiet vai pērciet produktus ātri bez nevajadzīgām aizkavēm.",
        balance_title: "Jūsu bilance",
        balance_subtitle: "Pārvaldiet savus līdzekļus un skatiet transakciju vēsturi.",
        current_balance: "Pašreizējā bilance",
        add_funds: "Pievienot līdzekļus",
        btn_add: "Pievienot",
        transactions: "Transakciju vēsture",
        no_tx: "Vēl nav transakciju.",
        user_settings: "Lietotāja iestatījumi",
        manage_profile: "Pārvaldiet savu profilu, preferences un kontu.",
        email: "E-pasts",
        language: "Valoda",
        theme: "Tēma",
        toggle_theme: "Pārslēgt tumšo/gaišo režīmu",
        product_name: "Produkta nosaukums",
        select_category: "Izvēlieties kategoriju",
        price: "Cena (€)",
        enter_price: "Ievadiet cenu",
        product_description: "Apraksts",
        enter_description: "Ievadiet produkta aprakstu",
        image_url: "Produkta attēla URL",
        enter_stock: "Ievadiet krājuma daudzumu",
        list_product: "Pievienot produktu",
        welcome_back: "Laipni lūdzam atpakaļ",
        login_account: "Pieslēdzieties savam tirgus kontam",
        email_address: "E-pasta adrese",
        password: "Parole",
        no_account: "Nav konta?",
        sign_up: "Reģistrēties",
        contacts: "Kontakti",
        select_chat: "Izvēlieties čatu",
        type_message: "Ierakstiet ziņojumu...",
        send: "Sūtīt",
        dashboard: "Panelis",
        overview: "Tirgus aktivitāšu pārskats",
        registered_users: "Reģistrētie lietotāji",
        total_products: "Kopējie produkti",
        transactions_today: "Transakcijas šodien",
        recent_activities: "Nesenie notikumi",
        user: "Lietotājs",
        action: "Darbība",
        date: "Datums",
        amount: "Summa",
        added_funds: "Pievienoti līdzekļi",
        sold_product: "Pārdots produkts",
        purchased_product: "Nopirkts produkts",
        register_title: "Reģistrācija - Tirgus",
        create_account: "Izveidot kontu",
        join_marketplace: "Pievienojieties mūsu tirgum un sāciet pirkt un pārdot",
        confirm_password: "Apstiprināt paroli",
        register: "Reģistrēties",
        already_have_account: "Jau ir konts?",
        sign_in: "Pieslēgties",
        passwords_not_match: "Paroles nesakrīt",
        password_too_short: "Parolei jābūt vismaz 6 rakstzīmēm",
        registration_success: "Reģistrācija veiksmīga! Lūdzu, pārbaudiet savu e-pastu, lai verificētu kontu.",
        chat: "Čats",
        admin: "Administrācija",
        sell_subtitle: "Pievienojiet savus produktus viegli un sasniedziet tūkstošiem pircēju.",
        settings_title: "Tirgus - Iestatījumi",
        account_actions: "Konta darbības",
        delete_account: "Dzēst kontu"
      }
    },
  
    // Translate a key
    t(key) {
      return this.strings[this.lang]?.[key] || this.strings['en'][key] || key;
    },
  
    // Set current language and update all elements
    setLang(lang) {
      if (!this.strings[lang]) {
        console.warn(`Language ${lang} not found, defaulting to English`);
        lang = 'en';
      }
      this.lang = lang;
  
      // Translate all elements with data-i18n
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        el.innerText = this.t(key);
      });
  
      // Translate dynamic product cards
      document.querySelectorAll('.product-card-modern').forEach(card => {
        const catEl = card.querySelector('.product-category');
        const priceEl = card.querySelector('.price-amount');
        const buyBtn = card.querySelector('.btn-buy-now');
        const reserveBtn = card.querySelector('.product-badge-new');
  
        if (buyBtn) buyBtn.innerText = this.t('buyNow');
        if (reserveBtn && reserveBtn.dataset.status === 'reserved') reserveBtn.innerText = this.t('reserved');
      });
  
      // Translate modal if open
      const modal = document.getElementById('productModal');
      if(modal) {
        modal.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.dataset.i18n;
          el.innerText = this.t(key);
        });
      }
    },
  
    // Format currency
    formatCurrency(amount) {
      return new Intl.NumberFormat(this.lang, { style: 'currency', currency: 'EUR' }).format(amount);
    }
  };
  
  // Auto-apply translations on page load
  window.addEventListener('DOMContentLoaded', () => {
    i18n.setLang(i18n.lang);
  });
  